# 🎯 **STRUCTURE JSON EXACTE POUR AUTOMATISATION**

Voici la structure JSON **exacte** que les AIs doivent utiliser, basée sur votre implémentation SuperMemo :

## **STRUCTURE COMPLÈTE D'UN EXERCICE**

```json
{
  "titre": "string (3-200 caractères)",
  "description": "string (10-1000 caractères)",
  "matiere": "mathematiques" | "francais",
  "niveau": "CP" | "CE1" | "CE2" | "CM1" | "CM2",
  "difficulte": "decouverte" | "entrainement" | "consolidation" | "approfondissement",
  "competenceCode": "string (format: CP.MA.N1.1)",
  "prerequis": {
    "required": [
      {
        "competenceCode": "string",
        "masteryThreshold": "number (0-100)",
        "weight": "number (0.1-5.0)",
        "description": "string"
      }
    ],
    "recommended": [
      {
        "competenceCode": "string",
        "masteryThreshold": "number (0-100)",
        "weight": "number (0.1-5.0)",
        "description": "string"
      }
    ],
    "helpful": [
      {
        "competenceCode": "string",
        "masteryThreshold": "number (0-100)",
        "weight": "number (0.1-5.0)",
        "description": "string"
      }
    ]
  },
  "typeExercice": "multiple-choice" | "fill-in-blank" | "text-input" | "drag-drop",
  "contenu": {
    "question": "string",
    "options": ["string", "string", "string", "string"],
    "type": "string",
    "timeLimit": "number (en secondes)"
  },
  "solution": {
    "correctAnswer": "string | number | string[]",
    "explanation": "string"
  },
  "pointsRecompense": "number (0-1000, défaut: 10)",
  "tempsEstime": "number (en secondes, défaut: 300)",
  "xp": "number (défaut: 10)",
  "ordre": "number (défaut: 0)",
  "estActif": "boolean (défaut: true)",
  "configuration": {
    "hintsAvailable": "number (défaut: 0)",
    "hintsText": ["string"],
    "metadata": "object"
  }
}
```

## 🎯 **EXEMPLES CONCRETS PAR TYPE**

### **1. MULTIPLE CHOICE (QCM) - Niveau 0**
```json
{
  "titre": "Addition simple",
  "description": "Combien font 2 + 3 ?",
  "matiere": "mathematiques",
  "niveau": "CP",
  "difficulte": "decouverte",
  "competenceCode": "CP.MA.N4.1",
  "prerequis": {
    "required": [
      {
        "competenceCode": "CP.MA.N1.1",
        "masteryThreshold": 80,
        "weight": 2.5,
        "description": "Nombres jusqu'à 100 requis pour addition"
      }
    ]
  },
  "typeExercice": "multiple-choice",
  "contenu": {
    "question": "Combien font 2 + 3 ?",
    "options": ["4", "5", "6", "7"],
    "type": "multiple-choice",
    "timeLimit": 30
  },
  "solution": {
    "correctAnswer": "5",
    "explanation": "2 + 3 = 5"
  },
  "pointsRecompense": 10,
  "tempsEstime": 30,
  "xp": 10,
  "ordre": 1,
  "estActif": true,
  "configuration": {
    "hintsAvailable": 1,
    "hintsText": ["Pense à compter sur tes doigts"],
    "metadata": {}
  }
}
```

### **2. FILL IN BLANK (Texte à trous) - Niveau 1**
```json
{
  "titre": "Soustraction simple",
  "description": "Combien font 10 - 4 ?",
  "matiere": "mathematiques",
  "niveau": "CP",
  "difficulte": "entrainement",
  "competenceCode": "CP.MA.N4.2",
  "prerequis": {
    "required": [
      {
        "competenceCode": "CP.MA.N1.1",
        "masteryThreshold": 80,
        "weight": 2.5,
        "description": "Nombres jusqu'à 100 requis pour soustraction"
      }
    ]
  },
  "typeExercice": "fill-in-blank",
  "contenu": {
    "question": "Combien font 10 - 4 = ___ ?",
    "type": "calculation",
    "timeLimit": 45
  },
  "solution": {
    "correctAnswer": "6",
    "explanation": "10 - 4 = 6"
  },
  "pointsRecompense": 12,
  "tempsEstime": 45,
  "xp": 12,
  "ordre": 2,
  "estActif": true,
  "configuration": {
    "hintsAvailable": 1,
    "hintsText": ["Commence par 10 et retire 4"],
    "metadata": {}
  }
}
```

### **3. TEXT INPUT (Saisie libre) - Niveau 2**
```json
{
  "titre": "Lecture de mots simples",
  "description": "Lis le mot affiché",
  "matiere": "francais",
  "niveau": "CP",
  "difficulte": "consolidation",
  "competenceCode": "CP.FR.L1.1",
  "prerequis": {
    "required": [
      {
        "competenceCode": "CP.FR.L1.1",
        "masteryThreshold": 85,
        "weight": 3.0,
        "description": "Reconnaissance phonèmes requise pour lecture"
      }
    ]
  },
  "typeExercice": "text-input",
  "contenu": {
    "question": "Lis ce mot : 'CHAT'",
    "type": "reading",
    "timeLimit": 60
  },
  "solution": {
    "correctAnswer": "chat",
    "explanation": "Le mot est 'chat'"
  },
  "pointsRecompense": 15,
  "tempsEstime": 60,
  "xp": 15,
  "ordre": 1,
  "estActif": true,
  "configuration": {
    "hintsAvailable": 2,
    "hintsText": ["C-H-A-T", "C'est un animal qui miaule"],
    "metadata": {}
  }
}
```

### **4. DRAG DROP (Glisser-déposer) - Niveau 3**
```json
{
  "titre": "Ordre croissant",
  "description": "Range les nombres du plus petit au plus grand",
  "matiere": "mathematiques",
  "niveau": "CP",
  "difficulte": "consolidation",
  "competenceCode": "CP.MA.N1.4",
  "prerequis": {
    "required": [
      {
        "competenceCode": "CP.MA.N1.1",
        "masteryThreshold": 80,
        "weight": 2.5,
        "description": "Nombres jusqu'à 100 requis pour comparaison"
      }
    ]
  },
  "typeExercice": "drag-drop",
  "contenu": {
    "question": "Glisse les nombres dans l'ordre croissant",
    "type": "ordering",
    "timeLimit": 90
  },
  "solution": {
    "correctAnswer": ["1", "2", "5", "8"],
    "explanation": "L'ordre croissant est : 1, 2, 5, 8"
  },
  "pointsRecompense": 18,
  "tempsEstime": 90,
  "xp": 18,
  "ordre": 3,
  "estActif": true,
  "configuration": {
    "hintsAvailable": 1,
    "hintsText": ["Commence par le plus petit nombre"],
    "metadata": {}
  }
}
```

## 🎯 **MAPPING DIFFICULTÉ ↔ TEMPS SUPERMEMO**

| Difficulté | Temps (s) | Points | XP | Hints |
|------------|-----------|--------|----|----|
| **Découverte** | 30 | 10 | 10 | 1 |
| **Entrainement** | 45 | 12 | 12 | 1 |
| **Consolidation** | 60 | 15 | 15 | 2 |
| **Approfondissement** | 90 | 18 | 18 | 2 |

## 🎯 **CODES DE COMPÉTENCES EXACTS**

### **FRANÇAIS (FR)**
```
CP.FR.L1.1 - Reconnaissance des phonèmes
CP.FR.L1.2 - Sons simples
CP.FR.L1.3 - Sons complexes
CP.FR.L1.4 - Graphèmes complexes
CP.FR.L1.5 - Mots fréquents
CP.FR.L1.6 - Lecture de mots nouveaux
CP.FR.L2.1 - Construction syllabique
CP.FR.L2.2 - Syllabation simple
CP.FR.L2.3 - Syllabation avancée
CP.FR.L3.1 - Lecture fluente
CP.FR.L3.2 - Compréhension explicite
CP.FR.L3.3 - Compréhension implicite
CP.FR.L3.4 - Ponctuation
CP.FR.C1.1 - Compréhension de mots
CP.FR.C1.2 - Compréhension de phrases
CP.FR.C1.3 - Compréhension de textes
CP.FR.C1.4 - Connecteurs logiques
CP.FR.C2.1 - Inférences
CP.FR.C2.2 - Implicite
CP.FR.C2.3 - Vocabulaire
CP.FR.C2.4 - Compréhension globale
CP.FR.E1.1 - Copie de mots
CP.FR.E1.2 - Copie de phrases
CP.FR.E1.3 - Dictée de mots
CP.FR.E1.4 - Dictée de phrases
CP.FR.E1.5 - Orthographe de base
CP.FR.E1.6 - Homophones
CP.FR.E2.1 - Production de mots
CP.FR.E2.2 - Production de phrases
CP.FR.E2.3 - Production de textes
CP.FR.E3.1 - Grammaire de base
CP.FR.E3.2 - Accords
CP.FR.E3.3 - Conjugaison
CP.FR.E3.4 - Syntaxe
CP.FR.G1.1 - Catégories grammaticales
CP.FR.G1.2 - Déterminants
CP.FR.G1.3 - Accords de base
CP.FR.G1.4 - Accords avancés
CP.FR.O1.1 - Expression orale
CP.FR.O1.2 - Compréhension orale
CP.FR.O1.3 - Vocabulaire oral
CP.FR.O1.4 - Communication
```

### **MATHÉMATIQUES (MA)**
```
CP.MA.N1.1 - Nombres jusqu'à 100
CP.MA.N1.2 - Dénombrement
CP.MA.N1.3 - Comparaison
CP.MA.N1.4 - Ordre
CP.MA.N1.5 - Suite numérique
CP.MA.N2.1 - Dénombrement de 1 à 10
CP.MA.N2.2 - Dénombrement de 1 à 20
CP.MA.N2.3 - Dénombrement de 1 à 100
CP.MA.N3.1 - Calcul mental
CP.MA.N3.2 - Addition mentale
CP.MA.N3.3 - Soustraction mentale
CP.MA.N4.1 - Addition
CP.MA.N4.2 - Soustraction
CP.MA.N4.3 - Multiplication
CP.MA.N4.4 - Division
CP.MA.P1.1 - Problèmes simples
CP.MA.P1.2 - Problèmes à étapes
CP.MA.P2.1 - Problèmes de multiplication
CP.MA.P2.2 - Problèmes d'arrangement
CP.MA.P3.1 - Stratégies de résolution
CP.MA.P3.2 - Stratégies avancées
CP.MA.M1.1 - Mesures de longueur
CP.MA.M1.2 - Unités de mesure
CP.MA.M1.3 - Mesure de longueurs
CP.MA.M1.4 - Estimation
CP.MA.M2.1 - Grandeurs
CP.MA.M2.2 - Comparaison de grandeurs
CP.MA.M3.1 - Temps
CP.MA.M3.2 - Heures
CP.MA.M3.3 - Durées
CP.MA.M4.1 - Monnaie
CP.MA.M4.2 - Pièces et billets
CP.MA.M4.3 - Calculs avec monnaie
CP.MA.M4.4 - Problèmes de monnaie
CP.MA.G1.1 - Formes géométriques
CP.MA.G1.2 - Propriétés des formes
CP.MA.G2.1 - Espace
CP.MA.G2.2 - Repérage
CP.MA.G2.3 - Logique spatiale
CP.MA.D1.1 - Données
CP.MA.D1.2 - Tableaux
CP.MA.D1.3 - Diagrammes
CP.MA.D1.4 - Comparaison de données
```

##    **VALIDATION AUTOMATIQUE**

### **Règles de Validation :**
1. **titre** : 3-200 caractères
2. **description** : 10-1000 caractères
3. **matiere** : "mathematiques" ou "francais"
4. **niveau** : "CP", "CE1", "CE2", "CM1", "CM2"
5. **difficulte** : "decouverte", "entrainement", "consolidation", "approfondissement"
6. **competenceCode** : Format exact (ex: CP.MA.N1.1)
7. **typeExercice** : "multiple-choice", "fill-in-blank", "text-input", "drag-drop"
8. **pointsRecompense** : 0-1000
9. **tempsEstime** : > 0
10. **xp** : > 0
11. **timeLimit** : 30, 45, 60, 90 (selon difficulté)
12. **hintsAvailable** : 0-2 (selon difficulté)

**Cette structure garantit l'intégration parfaite avec votre système SuperMemo !** 🎯